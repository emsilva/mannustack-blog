<!-- Performance chart using Chart.js -->
<div class="chart-container" style="position: relative; margin: 20px 0; padding: 16px; background: rgba(148,163,184,0.08); border-radius: 12px;">
  <h4 style="margin: 0 0 16px 0; font: 600 12px/1.2 system-ui; color: var(--content); text-align: center;">Financial Risk Assessment â€” Performance Progression</h4>
  <canvas id="opa-performance-chart" width="400" height="200"></canvas>
  <p style="margin: 8px 0 0 0; font: 500 10px/1.2 system-ui; color: #64748b; text-align: center;">Requests per second (higher is better)</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const ctx = document.getElementById('opa-performance-chart').getContext('2d');
  
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['CLI', 'Server', 'Server + WASM', 'K8s 3-node', 'K8s 4-node'],
      datasets: [{
        label: 'Requests/sec',
        data: [74.6, 277.8, 318.4, 600, 816],
        backgroundColor: [
          '#60a5fa',
          '#34d399', 
          '#fbbf24',
          '#f87171',
          '#a78bfa'
        ],
        borderColor: [
          '#3b82f6',
          '#10b981',
          '#f59e0b', 
          '#ef4444',
          '#8b5cf6'
        ],
        borderWidth: 1,
        borderRadius: 4
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          display: false
        },
        tooltip: {
          backgroundColor: 'rgba(15, 23, 42, 0.9)',
          titleColor: '#f8fafc',
          bodyColor: '#f8fafc',
          borderColor: '#475569',
          borderWidth: 1,
          cornerRadius: 6,
          displayColors: false,
          callbacks: {
            title: function(tooltipItems) {
              return tooltipItems[0].label + ' Mode';
            },
            label: function(context) {
              return context.parsed.y + ' req/s';
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          max: 900,
          ticks: {
            font: {
              size: 10,
              family: 'system-ui'
            },
            color: '#64748b'
          },
          grid: {
            color: 'rgba(100, 116, 139, 0.2)',
            drawBorder: false
          }
        },
        x: {
          ticks: {
            font: {
              size: 10,
              family: 'system-ui'
            },
            color: '#64748b',
            maxRotation: 0
          },
          grid: {
            display: false
          }
        }
      }
    }
  });
});
</script>